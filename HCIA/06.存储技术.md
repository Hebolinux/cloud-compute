## 传统存储方式

云计算中用的比较多的存储设备有两种：阵列、存储服务器

1. **阵列** --- 集中式存储，控制框的机头会成为瓶颈

   阵列结构分为**控制框**和**硬盘框**，*硬盘框*本身就是一个单独的设备，它包括**控制模块**和**硬盘**。*硬盘框*包括**级联模块**和**硬盘**，*控制框*硬盘容量不够时，可以通过总线和*级联模块*连接，扩展存储总容量

2. **存储服务器** --- 分布式存储，分布式存储的并发能力远高于集中式存储



### 硬盘分类

1. SATA盘：价格低。用于长久数据存储
2. SAS盘：速率快。用于告诉访问、高IOPS的要求
3. NL-SAS盘：SATA与SAS的折中盘。用于数据存储
4. SSD盘：电路盘。高性能



### RAID（RAID不等于阵列）

1. **服务器的RAID（软RAID）**

   Disk RAID：基于磁盘做RAID，将多个磁盘组合为RAID

   Disk RAID分类：

   - RAID 0：无冗余 (热备)。条带化I/O，并发读写能力强
   - RAID 1：偶数盘，镜像技术。50%的可用空间，系统盘用RAID 1
   - RAID 5：至少3块盘，(n+1)校验技术。拿出1块盘的空间用于存储校验码
   - RAID 6：至少4快盘，(n+2)校验技术。拿出2块盘的空间用于存储校验码
   - RAID 10：先做RAID 1再做RAID 0，组合成冗余+并发
   - RAID 50：先做RAID 1再做RAID 0，组合成校验+并发

```diff
+ 为什么所组合RAID都是后做RAID0：因为RAID0是所有RAID分类中I/O速率最快的，先通过RAID1或RAID5实现组内数据冗余，然后通过RAID0实现组件I/O速率最大化，这是最佳实践
+ RAID卡：校验、读取操作可以通过RAID卡实现，减少CPU的参与，提升读写性能
```



2. **阵列的RAID**

   块RAID：块级虚拟化，也称为RAID 2.0+，将每个磁盘的存储空间切块后组合为RAID

   块级RAID流程：(阵列中不需要考虑磁盘不足的情况)

   1. 将阵列中所有的磁盘划块
   2. 将不同磁盘中划分出的块组合为一个RAID（称为chunk group）

   优势：块级RAID中，任何一块磁盘损坏，会牵扯到所有使用了此坏盘块的chunk group，所有被牵扯到的chunk group又会通过其他在group中的块所在的磁盘，帮助坏盘修复数据。宏观上看就是大部分磁盘都帮助坏盘修复数据，性能上优于Disk RAID

```diff
+ 阵列在可靠性上比存储服务器要好，但阵列的控制框的控制模块（机头）可能会成为瓶颈，前端的计算节点或后端的硬盘数量都可以持续扩大，但机头的硬件I/O速率无法扩展
+ 存储服务器作为分布式存储提供了高并发的特性，不会有I/O瓶颈的问题，但存储服务器的多副本机制生成的冗余数据量远超阵列
+ 副本：根据副本数量的设置将同一份数据复制并存储到不同的存储节点。比如3副本，一个数据到达存储，这个数据要复制为3个副本分别存放到不同的3台存储服务器上
```

